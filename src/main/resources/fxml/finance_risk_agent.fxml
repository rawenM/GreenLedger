<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.lang.String?>

<HBox xmlns="http://javafx.com/javafx/20.0.2"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="Controllers.FinanceRiskAgentController"
      spacing="0" styleClass="page">


    <VBox prefWidth="220" styleClass="sidebar">
        <HBox alignment="CENTER_LEFT" spacing="8">
            <Label text="ðŸ¤–" style="-fx-font-size:20px;"/>
            <Label text="Claude Risk" styleClass="sidebar-title"/>
        </HBox>

        <Separator styleClass="sidebar-sep"/>

        <Button text="ðŸ’³ Financement" onAction="#handleGoFinancement" styleClass="nav-btn"/>
        <Button text="ðŸ“Š Tableau de bord" onAction="#handleGoDashboard" styleClass="nav-btn"/>

        <Separator styleClass="sidebar-sep"/>

        <Button text="ðŸ”„ Recharger le modele" onAction="#handleReloadModel" styleClass="nav-btn"/>
        <Button text="âš™ï¸ Parametres" onAction="#handleGoSettings" styleClass="nav-btn"/>

        <Region VBox.vgrow="ALWAYS"/>
    </VBox>

    <VBox spacing="0" HBox.hgrow="ALWAYS" styleClass="content-area">

        <HBox spacing="16" alignment="CENTER_LEFT">
            <padding>
                <Insets top="28" right="32" bottom="20" left="32"/>
            </padding>

             <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="Investissement Recommendation" styleClass="stat-title"/>
                <Label fx:id="lblModelStatus" text="Chargement..." styleClass="stat-value accent-blue"/>
                <!-- <Label text="ClaudeRisk.model" style="-fx-font-size:11px; -fx-opacity:0.7;"/> -->
            </VBox>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="RISQUE" styleClass="stat-title"/>
                <Label fx:id="lblRiskScore" text="N/A" styleClass="stat-value accent-amber"/>
                <Label text="Derniere analyse" style="-fx-font-size:11px; -fx-opacity:0.7;"/>
            </VBox>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="CONFIANCE" styleClass="stat-title"/>
                <Label fx:id="lblConfidence" text="N/A" styleClass="stat-value accent-green"/>
               <!--  <Label text="Score model" style="-fx-font-size:11px; -fx-opacity:0.7;"/> -->
            </VBox>
        </HBox>

        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS"
                    style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="24">
                <padding>
                    <Insets top="8" right="32" bottom="32" left="32"/>
                </padding>

                <VBox spacing="12">
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ§ " style="-fx-font-size:18px;"/>
                        <Label text="Agent de Risque - Financement" styleClass="page-title"/>
                    </HBox>
                    <Label text="Analyse des dossiers d'investissement et estimation du risque" styleClass="page-subtitle"/>
                </VBox>

                <VBox spacing="12" styleClass="card">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ“¥" style="-fx-font-size:18px;"/>
                        <Label text="Parametres d'entree" styleClass="page-title"/>
                    </HBox>

                    <HBox spacing="12">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Budget" styleClass="form-label"/>
                            <TextField fx:id="txtMontant" promptText="Ex: 15000" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Duree" styleClass="form-label"/>
                            <TextField fx:id="txtDuree" promptText="Ex: 24" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Type" styleClass="form-label"/>
                            <ComboBox fx:id="cmbSecteur" promptText="Selectionner" styleClass="field">
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="solar"/>
                                        <String fx:value="wind"/>
                                        <String fx:value="agriculture"/>
                                        <String fx:value="recycling"/>
                                    </FXCollections>
                                </items>
                            </ComboBox>

                        </VBox>
                    </HBox>

                    <HBox spacing="12">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Impact CO2" styleClass="form-label"/>
                            <TextField fx:id="txtTaux" promptText="Ex: 12.5" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Maturite" styleClass="form-label"/>
                            <TextField fx:id="txtScoreCredit" promptText="Ex: 36" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Ratio de financement" styleClass="form-label"/>
                            <TextField fx:id="txtApport" promptText="Ex: 0.35" styleClass="field"/>
                        </VBox>
                    </HBox>

                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Button text="âš¡ Analyser le risque" onAction="#handleRunRiskAnalysis" styleClass="btn btn-primary" prefHeight="36" prefWidth="180"/>
                        <Button text="ðŸ§¹ Reinitialiser" onAction="#handleReset" styleClass="btn btn-secondary" prefHeight="36" prefWidth="160"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="lblLastUpdate" text="" style="-fx-opacity:0.7;"/>
                    </HBox>
                </VBox>

                <VBox spacing="12" styleClass="card">
                    <padding>
                        <Insets top="16" right="20" bottom="20" left="20"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ“Š" style="-fx-font-size:18px;"/>
                        <Label text="Explication" styleClass="page-title"/>
                    </HBox>

                    <TextArea fx:id="txtNotes" text="Aucune analyse pour le moment." wrapText="true" styleClass="field textarea" style="-fx-pref-height: 140px;"/>
                </VBox>
            </VBox>
        </ScrollPane>

    </VBox>
</HBox>

