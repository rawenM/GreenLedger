<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>

<HBox xmlns="http://javafx.com/javafx/20.0.2"
      xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="Controllers.GreenWalletController"
        spacing="0" styleClass="page">

    <!-- LEFT SIDEBAR -->
    <VBox prefWidth="220" styleClass="sidebar" style="-fx-min-width: 220; -fx-max-width: 220;">

        <HBox alignment="CENTER_LEFT" spacing="8">
            <Label text="ðŸŒ¿" style="-fx-font-size: 20px;"/>
            <Label text="GreenLedger" styleClass="sidebar-title"/>
        </HBox>

        <Separator styleClass="sidebar-sep"/>

        <Button fx:id="btnGestionProjets" text="ðŸ“ Gestion Projets" styleClass="nav-btn" onAction="#onGestionProjets"/>
        <Button fx:id="btnWalletOverview" text="ðŸ’³ GreenWallet" styleClass="nav-btn" style="-fx-padding: 10 12;"/>
        <Button fx:id="btnSettings" text="âš™ Settings" styleClass="nav-btn" style="-fx-padding: 10 12;"/>

        <Region VBox.vgrow="ALWAYS"/>

        <Label text="Module Wallet" style="-fx-opacity: 0.6; -fx-font-size: 11px;"/>
        <VBox spacing="2" alignment="TOP_LEFT" style="-fx-padding: 10 0 0 0;">
            <Label fx:id="lblProfileName" styleClass="page-title"/>
            <Label fx:id="lblProfileType" styleClass="page-subtitle"/>
            <Button text="âœï¸ Modifier profil" styleClass="btn-secondary" onAction="#handleEditProfile"/>
        </VBox>
    </VBox>


    <!-- MAIN CONTENT -->
    <ScrollPane fitToWidth="true" fitToHeight="false" HBox.hgrow="ALWAYS"
                style="-fx-background-color: transparent; -fx-background: transparent;">
        <content>
    <VBox fx:id="contentPane" spacing="16" alignment="TOP_LEFT" styleClass="content-area">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <!-- PAGE HEADER -->
        <VBox spacing="4">
            <HBox spacing="12" alignment="CENTER_LEFT">
                <Label text="ðŸŒ± Portefeuille Carbone" styleClass="page-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <ComboBox fx:id="cmbWalletSelector" promptText="SÃ©lectionner Wallet" prefWidth="200" styleClass="field"/>
            </HBox>
            <Label text="Gestion des crÃ©dits carbone et traÃ§abilitÃ© complÃ¨te" styleClass="page-subtitle"/>
        </VBox>

        <!-- WALLET TOOLS -->
        <VBox spacing="10" styleClass="card" style="-fx-padding: 16;">
            <HBox spacing="8" alignment="CENTER_LEFT">
                <Label text="ðŸ§°" style="-fx-font-size: 14;"/>
                <Label text="Outils GreenWallet" styleClass="section-title" style="-fx-font-size: 14; -fx-padding: 0;"/>
            </HBox>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="btnTransactions" text="ðŸ“œ Transactions" styleClass="btn btn-secondary" prefHeight="34"/>
                <Button fx:id="btnBatches" text="ðŸ“¦ Batches" styleClass="btn btn-secondary" prefHeight="34"/>
                <Button fx:id="btnCreateWallet" text="ðŸ’¼ Nouveau Wallet" styleClass="btn btn-secondary" prefHeight="34"/>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>
        </VBox>

        <!-- WALLET INFO CARD -->
        <VBox spacing="12" styleClass="card" style="-fx-padding: 20;">
            <HBox spacing="8" alignment="CENTER_LEFT">
                <Label text="ðŸ’¼" style="-fx-font-size: 16;"/>
                <Label text="Informations du Wallet" styleClass="section-title" style="-fx-font-size: 15;"/>
            </HBox>
            
            <GridPane hgap="20" vgap="12">
                <Label text="NumÃ©ro Wallet:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: 600;"/>
                <Label fx:id="lblWalletNumber" text="â€”" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                
                <Label text="PropriÃ©taire:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: 600;"/>
                <Label fx:id="lblHolderName" text="â€”" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                
                <Label text="Type:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: 600;"/>
                <Label fx:id="lblOwnerType" text="â€”" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                
                <Label text="Statut:" GridPane.columnIndex="0" GridPane.rowIndex="3" style="-fx-font-weight: 600;"/>
                <Label fx:id="lblStatus" text="â€”" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
            </GridPane>
        </VBox>

        <!-- STAT CARDS ROW -->
        <HBox spacing="12" style="-fx-min-height: 100;">
            <VBox styleClass="stat-card" HBox.hgrow="ALWAYS" alignment="TOP_LEFT" spacing="4">
                <Label text="ðŸ’° CRÃ‰DITS DISPONIBLES" styleClass="stat-title"/>
                <Label fx:id="lblAvailableCredits" text="0.00 tCOâ‚‚" styleClass="stat-value accent-green" style="-fx-font-size: 28;"/>
                <Label text="PrÃªts Ã  utiliser" style="-fx-font-size: 11; -fx-opacity: 0.7;"/>
            </VBox>
            <VBox styleClass="stat-card" HBox.hgrow="ALWAYS" alignment="TOP_LEFT" spacing="4">
                <Label text="âŒ CRÃ‰DITS RETIRÃ‰S" styleClass="stat-title"/>
                <Label fx:id="lblRetiredCredits" text="0.00 tCOâ‚‚" styleClass="stat-value accent-amber" style="-fx-font-size: 28;"/>
                <Label text="CompensÃ©s dÃ©finitivement" style="-fx-font-size: 11; -fx-opacity: 0.7;"/>
            </VBox>
            <VBox styleClass="stat-card" HBox.hgrow="ALWAYS" alignment="TOP_LEFT" spacing="4">
                <Label text="ðŸ“Š CRÃ‰DITS TOTAUX" styleClass="stat-title"/>
                <Label fx:id="lblTotalCredits" text="0.00 tCOâ‚‚" styleClass="stat-value" style="-fx-font-size: 28;"/>
                <Label text="CumulÃ© historique" style="-fx-font-size: 11; -fx-opacity: 0.7;"/>
            </VBox>
        </HBox>

        <!-- TEST LAB -->
        <VBox spacing="10" styleClass="card" style="-fx-padding: 16;">
            <HBox spacing="8" alignment="CENTER_LEFT">
                <Label text="ðŸ§ª" style="-fx-font-size: 14;"/>
                <Label text="Test Lab â€¢ CrÃ©dit Rapide" styleClass="section-title" style="-fx-font-size: 14; -fx-padding: 0;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Mode dev" style="-fx-font-size: 11; -fx-opacity: 0.65;"/>
            </HBox>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="btnTestAdd25" text="+25 tCOâ‚‚" styleClass="btn btn-secondary" prefHeight="34"/>
                <Button fx:id="btnTestAdd100" text="+100 tCOâ‚‚" styleClass="btn btn-secondary" prefHeight="34"/>
                <Button fx:id="btnTestAdd500" text="+500 tCOâ‚‚" styleClass="btn btn-primary" prefHeight="34"/>
                <Button fx:id="btnTestAdd1000" text="+1000 tCOâ‚‚" styleClass="btn btn-primary" prefHeight="34"/>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>
        </VBox>

        <!-- TRANSACTIONS TABLE SECTION -->
        <VBox spacing="10" styleClass="card" style="-fx-padding: 18;" VBox.vgrow="ALWAYS">
            <HBox spacing="8" alignment="CENTER_LEFT">
                <Label text="ðŸ“œ" style="-fx-font-size: 14;"/>
                <Label text="Historique des Transactions" styleClass="section-title" style="-fx-font-size: 14; -fx-padding: 0;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnRefresh" text="ðŸ”„ Actualiser" styleClass="btn btn-secondary" prefHeight="32"/>
            </HBox>

            <TableView fx:id="tableTransactions" prefHeight="240" styleClass="table-card" VBox.vgrow="ALWAYS">
                <placeholder>
                    <VBox spacing="8" alignment="CENTER">
                        <Label text="ðŸ“‹" style="-fx-font-size: 32; -fx-opacity: 0.3;"/>
                        <Label text="Aucune transaction" styleClass="placeholder-label" style="-fx-font-size: 13;"/>
                        <Label text="Les transactions de crÃ©dits apparaÃ®tront ici" styleClass="placeholder-label" style="-fx-font-size: 11;"/>
                    </VBox>
                </placeholder>
                <columns>
                    <TableColumn fx:id="colTransactionId" text="ID" prefWidth="60"/>
                    <TableColumn fx:id="colTransactionType" text="Type" prefWidth="100"/>
                    <TableColumn fx:id="colTransactionAmount" text="Montant (tCOâ‚‚)" prefWidth="130"/>
                    <TableColumn fx:id="colTransactionDate" text="Date" prefWidth="150"/>
                    <TableColumn fx:id="colTransactionReference" text="RÃ©fÃ©rence" prefWidth="250"/>
                </columns>
            </TableView>
        </VBox>

        <!-- ACTION BUTTONS -->
        <HBox spacing="12" alignment="BOTTOM_LEFT" style="-fx-padding: 4 0 0 0;">
            <Button fx:id="btnIssueCreditsMain" 
                    text="âž•  Ã‰mettre CrÃ©dits" 
                    styleClass="btn btn-primary"
                    prefHeight="38"
                    prefWidth="160"/>
            <Button fx:id="btnRetireCreditsMain" 
                    text="âŒ  Retirer CrÃ©dits" 
                    styleClass="btn btn-secondary"
                    prefHeight="38"
                    prefWidth="150"/>
            <Button fx:id="btnTransferCredits" 
                    text="ðŸ”„  TransfÃ©rer" 
                    styleClass="btn btn-secondary"
                    prefHeight="38"
                    prefWidth="130"/>
            <Button fx:id="btnEditWallet" 
                    text="âœï¸  Modifier" 
                    styleClass="btn btn-secondary"
                    prefHeight="38"
                    prefWidth="120"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="btnDeleteWallet" 
                    text="ðŸ—‘ï¸  Supprimer" 
                    styleClass="btn btn-danger"
                    prefHeight="38"
                    prefWidth="130"/>
            <Button fx:id="btnExport" 
                    text="ðŸ“¥  Exporter" 
                    styleClass="btn btn-secondary"
                    prefHeight="38"
                    prefWidth="120"/>
        </HBox>
    </VBox>
        </content>
    </ScrollPane>
</HBox>
